// ==================================== ·
// TRAVEL ROUTE
// ==================================== ·

.travel-route{
  color: $dark-gray;
}

/* ============ Fila genérica ============ */

.travel-route__item{
  @include transition( $transitions-duration * 2 );
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  justify-content: space-between;
  min-height: $c-travel-route__item-height;
  .travel-route__travelling &:not(.travel-route__city):not(.travel-route__transport):not(.travel-route__closed-tour__header){
    .c-route-date{
      border-bottom: 1px solid rgba(white, .3);
    }
  }
  .travel-route__destination:last-child &%travel-route__city-service:last-child{
    .c-route-date{
      border-bottom: none;
    }
  }
  .design__map-composer & {
    @include respond-to( $mobile ) {
      padding-left: $sizex;
    }
  }
  .design__map-composer .travel-route__travelling &,
  .design__map-composer &.travel-route__transport--origin,
  .design__map-composer &.travel-route__city--origin,
  &.travel-route__add-destination__header{
    border-right-style: solid;
    border-right-width: 4px;
    &:not(.travel-route__city):not(.travel-route__closed-tour__header){
      border-right-color: transparent;
    }
  }
  .travel-route__draganddrop-bars{
    @include transition;
    display: none;
  }
  .sidebar &.is-active:not(.travel-route__city):not(.is-desactive){
    border-right-style: solid;
    border-right-width: 4px;
  }
  &.is-desactive{
    .travel-route__content{
      font-weight: bold;
    }
  }
  &.is-not-available{
    .travel-route__content{
      color: $light-gray;
    }
    .travel-route__not-available{
      font-size: $font-size;
    }
  }
}

.travel-route__destination {
  .ui-sortable-disabled & {
    -ms-touch-action: initial;
    touch-action: initial;
  }
}

// Boton principal genérico
// =========================  ·
.travel-route__main-state{
  @include content-center();
  max-width: $c-travel-route__main-state-size;
  min-width: $c-travel-route__main-state-size;
  width: $c-travel-route__main-state-size;
  .travel-route__closed-tour--mandatory &{
    display: none;
  }
}

/* ============ COLUMNA DEL CONTENIDO ============ */
.travel-route__locked , .travel-route__draganddrop-bars, .travel-route__checkbox{
  color: $light-gray;
}
.travel-route__locked{
  font-size: $font-size--small;
}
.travel-route__checkbox{
  @include transition;
  text-align: center;
  min-width: $c-travel-route__main-state-size;
  &:hover{
    color: $dark-gray;
    background-color: rgba(black, .05);
    cursor: pointer;
  }
  i{
    @include transition;
  }
  .is-desactive &{
    color: white;
    @extend %bg-clr-hover--success;
    border-bottom: 1px solid rgba(255,255,255,.4);
    i{
      transform: rotate(45deg);
    }
  }
}
.travel-route__detail-icon{
  @include flexible-container( null , null , center , center );
  @include display-inline-flex();
  @include cercle( 16px );
  font-size: 9px;
  margin-right: 3px;
  font-weight: bold;
  &:not([class*="bg-clr"]) {
    color: $dark-gray;
    background-color: $lighter-gray;
  }
  .travel-route__list-destinations &{
    color: white;
  }
  @include rtl {
    margin-left: 3px;
    margin-right: initial;
  }
}
.travel-route__city-name{
  @include flexible-container( row , nowrap , center , flex-start);
  font-weight: bold;
  font-size: $font-size--middle;
  margin: 0;
  .travel-route__city--origin & {
    font-size: $font-size;
  }
  i.fa-angle-double-right{
    transition: all $transitions-duration ease-in-out 0s;
    opacity: 0;
    margin-left: -10px;
    margin-top: 2px;
  }
  &:hover {
    i.fa-angle-double-right {
      opacity: 0.7;
      margin-left: 3px;
    }
  }
  .travel-route__closed-tour__step &{
    font-size: $font-size;
  }
}
.travel-route__list-destinations{
  & > div {
    @include flexible-container( row , nowrap , center , flex-start );
    font-weight: bold;
    margin-top: 3px;
    &:first-child{
      margin-top: 0;
      border-top: rgba(0, 0, 0, 0.05) 4px solid;
      padding-top: 10px;
    }
    &:last-child{
      padding-bottom: 10px;
    }
  }
}
.travel-route__collapse{
  .travel-route__checkbox{
    @include flexible-container( row , nowrap , center , center );
    min-height: 50px;
    i{
      @include transition;
      font-size: $font-size--middle;
    }
  }
  .travel-route__city-name{
    justify-content: space-between;
    &:hover{
      cursor: pointer;
      .travel-route__checkbox{
        background-color: rgba(0, 0, 0, 0.05);
        i{
          color: $dark-gray;
        }
      }
    }
  }
  &:not(.collapsed){
    i.fa-angle-down{
      transform: rotate(180deg);
    }
    .travel-route__checkbox {
      background-color: rgba(0, 0, 0, 0.05);
    }
    .travel-route__city-name:hover .travel-route__checkbox i:before{
      content: "\f00d";
    }
  }
}
.travel-route__content{
  display: flex;
  flex-flow: column wrap;
  align-content: flex-start;
  justify-content: center;
  & > * {
    width: 100%;
  }
  .travel-route__input &{
    flex-flow: row nowrap;
    justify-content: space-between;
    $size-button: 35px;
    padding: 7px;
    padding-left: 0;
    input {
      border-color: transparent;
    }
    a {
      max-width: 35px;
      min-width: 35px;
      text-align: center;
      min-height: $size-button;
      line-height: $size-button;
      background-color: white;
      border-radius: 4px;
      margin-left: 10px;
      cursor: pointer;
      @include transition;
      display: flex;
      align-items: center;
      justify-content: center;
      span{
        width: 100%;
      }
      &:hover{
        background-color: rgba(white, .8);
      }
    }
    &.travel-route__content--without-button a{
      display: none;
    }
  }
  .sidebar &{
    padding-left: $sizex;
  }
  width: 100%;
}
.travel-route__autocomplete{
  input{
    width: 100%;
    height: 100%;
    min-height: 35px;
  }
}
.travel-route__service-content{
  @include transition;
  padding-right: $sizesx;
  position: relative;
  &:not(.u-hover-null):hover{
    background-color: $s-bg-clr-hover--lightest--alpha;
    .travel-route__animation-options{
      padding-left: 0;
    }
  }
}
a.travel-route__service-content{

}
.travel-route__service__list-item:first-child,
.travel-route__service__list-item:nth-child(2){
  padding-right: 30px;
  min-height: 16px;
  @include rtl {
    padding-left: 30px;
    padding-right: 0;
  }
}
.travel-route__delete{
  @include transition;
  @include flexible-container();
  border-bottom-left-radius: $border-radius;
  background-color: white;
  color: #999;
  padding: 2px 3px;
  text-align: center;
  position: absolute;
  top: 0;
  right: 0;
  z-index: 10;
  width: 30px;
  height: 30px;
  cursor: pointer;
  display: none;
  &:hover{
    background-color: $danger-color;
    color: white;
  }
  .travel-route__content:hover & {
    display: flex;
  }
  @include rtl{
    border-bottom-left-radius: 0;
    border-bottom-right-radius: $border-radius;
    right: initial;
    left: 0;
  }
}
.travel-route__detail-modals{
  padding: 0 0 $sizesx;
  .travel-route__service-details + & {
    margin-top: -$sizex;
  }
}
.travel-route__provider-message{
  font-size: $font-size--small;
}
.travel-route__service-details{
  padding: $sizex 0;
  min-width: 100%;
  display: block;
}
.travel-route__service-title{
  font-weight: bold;
  margin: 0;
  font-size: inherit;
}
.travel-route__hotel-plan{
  span{
    display: inline-block;
    margin-right: $sizesx;
    margin-bottom: 3px;
    font-size:$font-size--small;
    @include rtl {
      margin-right: 0;
      margin-left: $sizesx;
    }
  }
 }
.travel-route__transport-details{
  font-size: $font-size--small;
  span{
    display: inline-block;
    span {
      margin-right: 7px;
    }
    .btn:not(:first-child){
      margin-left: 2px;
    }
  }
}
.travel-route__count{
  .travel-route__content{
    display: flex;
    flex-flow: row nowrap;
    justify-content: space-between;

    padding: $sizex;
    padding-left: 0;
    & > div {
      @include flexible-container( row, wrap, center , center );
      border-radius: $border-radius;
      border: 1px solid $lighter-gray;
      padding: $sizex 0;
      width: 100%;
      &:last-child {
        max-width: 50px;
        margin-left: $sizex;
        @include rtl {
          margin-left: initial;
          margin-right: $sizex;
        }
      }
    }
    span{
      margin: 0 5px;
    }
    @include rtl {
      padding-left: $sizex;
      padding-right: 0;
    }
  }
}

/* ============ CAMBIOS EN EL MAPA ============ */
.design__map-composer .travel-route{
  .travel-route__city:not(.travel-route__city--origin) .travel-route__city-name{
    cursor: pointer;
  }
}

/* ============ COMPONENTES DEL MAPA ============ */
.travel-route__add-destination__title{
  font-size: $font-size--big;
}
.travel-route__add-destination__header{
  color: white;
  .is-simple & , .is-circuitplusfly.is-active &{
    .c-route-step__point{
      display: none;
    }
    .c-route-step{
      padding-top: 4px;
    }
    .c-route-step__line--bottom{
      margin-bottom: -10px;
    }
  }
  .is-simple &{
    .travel-route__content{
      @include flexible-container( row , nowrap , flex-end , flex-start );
    }
  }
  .is-circuitplusfly &{
    min-height: 60px;
    .travel-route__checkbox{
      min-height: 50px;
    }
  }
}
.travel-route__add-destination{
  .c-route-step__point, %c-route-step__line{
    background-color: white;
  }
  .travel-route__checkbox{
    color: white;
    background-color: rgba(white, .2);
    &:hover{
      background-color: rgba(white, .4);
    }
  }
  .__add-destination__options{
    label{
      @include flexible-container( row , nowrap , center , flex-start );
      margin: 0;
      color: white !important;
      input{
        margin: 0;
        margin-right: 5px;
      }
    }
  }
  &.is-simple , &.is-circuitplusfly.is-active{
    .travel-route__add-destination__header .fa-plus:before{
      content: "\f00d";
    }
  }
  &.is-circuitplusfly{
    .c-route-step{
      padding-top: $sizesx;
      padding-bottom: $sizesx;
    }
  }
}

/* ============ DRAG AND DROP ============ */
.travel-route.is-draganddrop, .is-draganddrop .travel-route{
  background-color: #ececec;
  overflow: hidden;
  padding: $sizex 0;
  .travel-route__transport{
    opacity: .25;
    min-height: 35px;
    .c-route-date > *{
      display: none;
    }
  }
  .travel-route__destination{
    background: white;
    box-shadow: 0 0 5px rgba(black, .1);
    &:hover, .travel-route__city-name:hover{
      cursor: move;
      .travel-route__draganddrop-bars{
        background-color: $lightest-gray;
        color: $dark-gray;
      }
    }
  }
  .travel-route__city--origin,
  .c-route-date__arrow,
  .travel-route__city .travel-route__checkbox,
  .travel-route__transport .travel-route__checkbox,
  .travel-route__locked,
  .travel-route__count,
  .travel-route__city-name i{
    display: none;
  }
  .travel-route__hotel,
  .travel-route__closed-tour__step,
  .travel-route__add-destination,
  .travel-route__add-destination__header,
  .travel-route__add-destination__main,
  .travel-route__add-origin{
    height: 0;
    min-height: 0;
    overflow: hidden;
  }
  %c-route-step__line{
    opacity: 0;
  }
  .travel-route__draganddrop-bars{
    display: flex;
  }
}

.js-travel-route__item--dragging{
  transform: rotate(-2deg);
}

// Estilos concretos (Evitar usar esto)
.travel-route__city .travel-route__checkbox, .travel-route__closed-tour__header .travel-route__checkbox{
  &:hover{
    background-color: $danger-color;
    color: white;
  }
}


// Manual services
// ===================
.travel-route{
  @include bem-modifier( manual-services ){

    .travel-route__item:not(:last-child) {
      .c-route-date{border-bottom:1px solid #E3E3E3;}
    }
  }

}